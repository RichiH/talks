\documentclass[t]{beamer}
\usepackage{helvet}
\usepackage{calc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}

\usetheme{Ilmenau}

\setbeamercovered{transparent}
\setbeamertemplate{navigation symbols}{}

\usepackage{units}
\usepackage{amsbsy}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{epsf}
\usepackage{epsfig}
\usepackage{fixmath}
%\usepackage{pgfmath}
\usepackage{wrapfig}


\title{Adapting brownfield technology to cloud-native technology}
\subtitle{One year of Prometheus}
\author{Richard Hartmann,\\
RichiH@\{freenode,OFTC,IRCnet\},\\
richih@\{fosdem,debian,richih\}.org}
\date{2016-11-09}


\begin{document}

% hide all subsections
\setcounter{tocdepth}{1}

\begin{frame}
	\titlepage
\end{frame}

%\begin{frame}
%	\frametitle{Statistics}
%	\tableofcontents
%\end{frame}

\section{Introduction}

\begin{frame}
	\frametitle{`whoami`}
	\begin{itemize}
		\item Richard "RichiH" Hartmann
		\item System architect at SpaceNet AG
		\item Always looking for nice co-workers in the Munich area ;)
		\item FOSDEM, DebConf, DENOGx, PromCon staff
		\item Debian Developer
		\item Author of \url{https://github.com/RichiH/vcsh}
	\end{itemize}
\end{frame}

\section{Background}

\begin{frame}
	\frametitle{`whowasi`}
	\begin{itemize}
		\item Solely responsible for a Germany-wide backbone 2009-2015
		\begin{itemize}
			\item Architecture
			\item Operations
			\item ...and On-Call 24 * 365 * 7 days...
		\end{itemize}
		\item ...so my sanity literally depended on aggressive yet correct monitoring \& alerting
		\item Love monitoring, but hate (almost) all monitoring tools
		\item Used Zabbix exclusively
		\item (New guy pushed Cacti and got approval for it; a good time to leave)
	\end{itemize}
\end{frame}

\begin{frame}
	\frametitle{SpaceNet}
	\begin{itemize}
		\item SpaceNet is the oldest commercial ISP in Germany; operating since 1993
		\item Lots of ancient, in-house solutions for monitoring, config management, orchestration, etc which predate everything else
		\item One company-wide monitoring solution: watchdog \& watchcat
		\item Yet, every team had its own custom tools on top
		\item Islands of data; no APIs, no machine-readable export
		\item Alerting done through B52-style email carpet bombing
	\end{itemize}
\end{frame}
			% technically sound except B52
			% quality depending on team...

\section{Lightbringer}

\begin{frame}
	\frametitle{Seeing the light}
	\begin{itemize}
		\item Ran DebConf15 on LibreNMS, wanted to do the same for FOSDEM
		\item 2015-10-01: Inform FOSDEM team of planned migration
		\item 2015-10-02: Murali Suriar suggests Prometheus instead
		\item 2015-10-03: First trivial patch
	\end{itemize}
\end{frame}

\begin{frame}
	% TODO
	\frametitle{Here, there be network}
	\begin{itemize}
		\item We are an ISP, remember?
		\item ~1000 devices polled via SNMP
		\item Might be the world's largest snmp\_exporter installation
		\item Python implementation of smnp\_exporter had really bad system load
		\begin{itemize}
			\item It goes up to eleven...
			\item ~60 devices outof ~300 at the time were up/down
			\item The set of affected devices was stable
		\end{itemize}
		\item Contracted Brian Brazil to reimplement in Go
		\item Go implementation hit some unexpected pitfalls of various SNMP implementations
		\begin{itemize}
			\item Some data structures returned repeatedly
			\item Table indices returned repeatedly
			\item Table indices emtpy
		\end{itemize}
			% todo new page "open / todo"?
		\item Go implementation errors out completely on such errors, thus using Python exporter for some machine sets for now
		\item Caveat: Ip4Table %TODO broken in Python implementation
		\item IOS XR uses non-standard mapping for CPU %TODO load/temp? and others; descriptive language of snmp\_exporter does not suffice
	\end{itemize}
\end{frame}
		% weird ASR CPU mapping
%snmp_exporter in go
% ~1k devices

%TODO murali
% watchdog, watchcat, etc
% https://cnkc16.sched.org/mobile/#session:9c50e61854e3ba8b9bbc5de3d1a5dbca
%Dashboard
%Perpetual greenfield
%One tool fits all
%Make your hammer fit your nails

% social (windows)

% sales
% accounting
% power count

% are we there yet? no!


\end{document}

%\begin{frame}
%	\frametitle{}
%	\begin{itemize}
%		\item 
%		\item 
%		\item 
%		\item 
%		\item 
%	\end{itemize}
%\end{frame}
